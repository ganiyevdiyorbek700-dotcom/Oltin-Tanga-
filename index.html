<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Oltin Tanga - Billie Edition</title>
    <script src="https://alwingulla.com/tag.min.js" data-zone="10558007" async></script>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root { --bg: #050810; --accent: #f59e0b; --card: #111827; --purple: #7c3aed; --green: #22c55e; }
        body { background: var(--bg); color: white; font-family: sans-serif; margin: 0; padding-bottom: 100px; text-align: center; user-select: none; overflow-x: hidden; }
        .header-stats { display: flex; justify-content: space-around; padding: 10px; margin-top: 10px; }
        .stat-box { background: rgba(124, 58, 237, 0.1); border: 1px solid var(--purple); border-radius: 12px; flex: 1; padding: 10px 5px; margin: 0 4px; }
        .stat-label { font-size: 8px; color: #888; display: block; }
        .stat-value { font-size: 14px; font-weight: bold; color: var(--accent); }
        .total-coins { font-size: 50px; font-weight: 900; color: #facc15; margin: 15px 0 5px 0; }
        .tanga-wrapper { position: relative; width: 100%; height: 260px; display: flex; align-items: center; justify-content: center; }
        .main-coin { width: 190px; height: 190px; background: radial-gradient(circle, #facc15 0%, #ca8a04 100%); border-radius: 50%; border: 8px solid #854d0e; display: flex; align-items: center; justify-content: center; font-size: 60px; font-weight: 900; z-index: 5; }
        .side-btn { position: absolute; width: 45px; height: 45px; border-radius: 50%; border: 2px solid var(--accent); background: #000; display: flex; align-items: center; justify-content: center; font-size: 20px; z-index: 10; }
        .btn-daily { left: 40px; } .btn-spin { right: 40px; background: conic-gradient(red, yellow, green, blue, red); }
        .nav-footer { position: fixed; bottom: 0; width: 100%; background: #0a0e1a; display: flex; justify-content: space-around; padding: 12px 0; border-top: 1px solid #1e293b; z-index: 1000; }
        .nav-item { flex: 1; font-size: 8px; font-weight: bold; color: white; opacity: 0.6; }
        .section { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: var(--bg); z-index: 2000; padding: 20px; box-sizing: border-box; overflow-y: auto; }
        .section.active { display: block; }
        .card { background: var(--card); padding: 12px; border-radius: 12px; margin-bottom: 10px; border: 1px solid #334155; display: flex; justify-content: space-between; align-items: center; text-align: left; }
        .btn-action { background: var(--accent); color: #000; border: none; padding: 8px 12px; border-radius: 6px; font-weight: bold; }
        .notif { position: fixed; top: 10px; width: 80%; left: 10%; background: var(--purple); padding: 10px; border-radius: 8px; transition: 0.4s; z-index: 9999; transform: translateY(-150%); }
    </style>
</head>
<body>
    <audio id="bg-music" loop src="https://files.freemusicarchive.org/storage-freemusicarchive-org/music/no_curator/Ketsa/Rare_Flowers/Ketsa_-_04_-_Flowers_Scent.mp3"></audio>
    <div id="notif-box" class="notif">Xabarnoma!</div>

    <div id="main-ui">
        <div class="header-stats">
            <div class="stat-box"><span class="stat-label">STATUS</span><span class="stat-value" id="st-ui">Bronza</span></div>
            <div class="stat-box"><span class="stat-label">SOATIGA</span><span class="stat-value" id="h-ui">0</span></div>
            <div class="stat-box"><span class="stat-label">TAP KUCHI</span><span class="stat-value" id="p-ui">1</span></div>
        </div>
        <div class="total-coins" id="c-ui">0</div>
        <div style="color:#00d4ff; font-weight:bold; font-size:14px;">ğŸ’ <span id="d-ui">0</span></div>
        <div class="tanga-wrapper">
            <div class="side-btn btn-daily" onclick="openSec('daily')">ğŸ</div>
            <div class="main-coin" onclick="handleTap(event)" ontouchstart="handleTap(event)">1</div>
            <div class="side-btn btn-spin" onclick="openSec('spin')">ğŸ¡</div>
        </div>
        <div>âš¡ <span id="e-ui">500 / 500</span></div>
    </div>

    <div id="market-sec" class="section">
        <h3>ğŸ›’ Market</h3>
        <div class="card"><div><b>Ayirboshlash</b><br><small>1000 ğŸ’° â¡ï¸ 1 ğŸ’</small></div><button class="btn-action" onclick="exchange()">SOTIB OLISH</button></div>
        <button onclick="closeSec()" class="btn-action" style="width:100%; background:#334155; color:white;">YOPISH</button>
    </div>

    <div id="ref-sec" class="section">
        <h3>ğŸ‘¥ Do'stlar</h3>
        <p>25,000ğŸ’° + 50ğŸ’</p>
        <div class="card"><span id="ref-link-ui" style="font-size:10px;">t.me/OltinTanga1_bot?start=id</span><button class="btn-action" onclick="copyRef()">NUSXA</button></div>
        <div class="card" style="flex-direction:column; align-items:center;">
            <span>Yig'ilgan: <b id="pending-ref-ui">0</b> ğŸ’°</span>
            <button class="btn-action" id="claim-ref-btn" style="width:100%; margin-top:10px; background:var(--green); color:white;" onclick="claimRefReward()" disabled>OLISH</button>
        </div>
        <button onclick="closeSec()" class="btn-action" style="width:100%; background:#334155; color:white;">YOPISH</button>
    </div>

    <div id="leaderboard-sec" class="section">
        <h3>ğŸ“Š Leaderboard</h3>
        <div id="leader-list">
            <div class="card" style="border:2px solid gold;"><b>1. Ganiyev Diyorbek (Siz)</b><span id="my-rank-coins">0</span></div>
        </div>
        <button onclick="closeSec()" class="btn-action" style="width:100%; background:#334155; color:white;">YOPISH</button>
    </div>

    <div id="boost-sec" class="section">
        <h3>âš¡ Boosterlar</h3>
        <div class="card"><div><b>Tap Kuchi (+1)</b><br><small id="p-cost-ui">Lvl 1 | 500ğŸ’°</small></div><button class="btn-action" onclick="buyBoost('p')">LEVEL UP</button></div>
        <div class="card"><div><b>Energiya (+500)</b><br><small id="e-cost-ui">Lvl 1 | 500ğŸ’°</small></div><button class="btn-action" onclick="buyBoost('e')">LEVEL UP</button></div>
        <div class="card"><div><b>Soatbay (+100)</b><br><small id="h-cost-ui">Lvl 1 | 500ğŸ’°</small></div><button class="btn-action" onclick="buyBoost('h')">LEVEL UP</button></div>
        <button onclick="closeSec()" class="btn-action" style="width:100%; background:#334155; color:white;">YOPISH</button>
    </div>

    <div id="home-sec" class="section">
        <h3>ğŸ  Uyim</h3>
        <div class="card"><b>Ism:</b> <span id="u-name">...</span></div>
        <div class="card"><b>ID:</b> <span id="u-id">...</span></div>
        <button class="btn-action" style="width:100%; height:60px; background:linear-gradient(45deg, #7c3aed, #f59e0b); color:white; font-size:18px;" onclick="showAirdrop()">AIRDROP</button>
        <button onclick="closeSec()" class="btn-action" style="width:100%; background:#334155; color:white; margin-top:10px;">YOPISH</button>
    </div>

    <div class="nav-footer">
        <div class="nav-item" onclick="openSec('market')">ğŸ›’<br>MARKET</div>
        <div class="nav-item" onclick="openSec('ref')">ğŸ‘¥<br>REFERAL</div>
        <div class="nav-item" onclick="openSec('leaderboard')">ğŸ“Š<br>REYTING</div>
        <div class="nav-item" onclick="openSec('boost')">âš¡<br>BOOSTER</div>
        <div class="nav-item" onclick="openSec('home')">ğŸ <br>UYIM</div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getDatabase, ref, get, update } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

        const firebaseConfig = { /* Firebase ma'lumotlaringiz */ };
        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);
        const tg = window.Telegram.WebApp;
        const user = tg.initDataUnsafe.user || { id: "12345", first_name: "Diyorbek" };

        let s = {
            coins: 0, diamonds: 0, energy: 500, maxE: 500, power: 1, hourly: 0,
            pLvl: 1, eLvl: 1, hLvl: 1, pCost: 500, eCost: 500, hCost: 500,
            lastUpdate: Date.now(), pendingRef: 0
        };

        async function init() {
            const snap = await get(ref(db, 'users/' + user.id));
            if(snap.exists()) {
                const data = snap.val();
                const offline = Math.floor((Date.now() - data.lastUpdate) / 1000);
                const earned = Math.floor(offline * (data.hourly / 3600));
                if(earned > 0) notify(`Offlayn daromad: ${earned}ğŸ’° o'tkazildi!`);
                s = {...s, ...data};
                s.energy = Math.min(s.maxE, s.energy + Math.floor(offline / 2));
            }
            document.getElementById('bg-music').play().catch(() => console.log("Musiqa boshlanmadi"));
            document.getElementById('u-name').innerText = user.first_name;
            document.getElementById('u-id').innerText = user.id;
            document.getElementById('ref-link-ui').innerText = `t.me/OltinTanga1_bot?start=${user.id}`;
            updateUI();
            setInterval(() => { s.coins += (s.hourly/3600); if(s.energy < s.maxE) s.energy += 0.5; updateUI(); save(); }, 1000);
        }

        window.buyBoost = (type) => {
            if(type === 'p' && s.coins >= s.pCost && s.pLvl < 50) {
                s.coins -= s.pCost; s.power++; s.pLvl++; s.pCost = Math.round(s.pCost * 1.2); notify("Tap kuchi oshdi!");
            } else if(type === 'e' && s.coins >= s.eCost && s.eLvl < 10) {
                s.coins -= s.eCost; s.maxE += 500; s.eLvl++; s.eCost = Math.round(s.eCost * 1.5); notify("Energiya sig'imi oshdi!");
            } else if(type === 'h' && s.coins >= s.hCost && s.hLvl < 10) {
                s.coins -= s.hCost; s.hourly += 100; s.hLvl++; s.hCost = Math.round(s.hCost * 1.5); notify("Soatbay daromad oshdi!");
            }
            updateUI(); save();
        };

        window.exchange = () => { if(s.coins >= 1000) { s.coins -= 1000; s.diamonds++; notify("1ğŸ’ olindi!"); updateUI(); save(); } };
        window.claimRefReward = () => { if(s.pendingRef > 0) { s.coins += s.pendingRef; s.diamonds += (s.pendingRef/25000)*50; s.pendingRef = 0; notify("Referal pullari olindi!"); updateUI(); save(); } };
        window.showAirdrop = () => alert("Tez kunda Tonga almashtirilish boshlanadi!");

        function notify(m) { const b = document.getElementById('notif-box'); b.innerText = m; b.style.transform = "translateY(0)"; setTimeout(() => b.style.transform = "translateY(-150%)", 3000); }
        function updateUI() {
            document.getElementById('c-ui').innerText = Math.floor(s.coins).toLocaleString();
            document.getElementById('d-ui').innerText = s.diamonds;
            document.getElementById('e-ui').innerText = `${Math.floor(s.energy)}/${s.maxE}`;
            document.getElementById('p-ui').innerText = s.power;
            document.getElementById('h-ui').innerText = s.hourly;
            document.getElementById('p-cost-ui').innerText = `Lvl ${s.pLvl}/50 | ${s.pCost}ğŸ’°`;
            document.getElementById('e-cost-ui').innerText = `Lvl ${s.eLvl}/10 | ${s.eCost}ğŸ’°`;
            document.getElementById('h-cost-ui').innerText = `Lvl ${s.hLvl}/10 | ${s.hCost}ğŸ’°`;
            document.getElementById('pending-ref-ui').innerText = s.pendingRef.toLocaleString();
            document.getElementById('claim-ref-btn').disabled = s.pendingRef === 0;
            document.getElementById('my-rank-coins').innerText = Math.floor(s.coins).toLocaleString() + " ğŸ’°";
        }
        window.handleTap = (e) => { if(s.energy >= s.power) { s.coins += s.power; s.energy -= s.power; updateUI(); } };
        window.openSec = (id) => { document.querySelectorAll('.section').forEach(x => x.classList.remove('active')); document.getElementById(id + '-sec').classList.add('active'); };
        window.closeSec = () => document.querySelectorAll('.section').forEach(x => x.classList.remove('active'));
        function save() { s.lastUpdate = Date.now(); update(ref(db, 'users/' + user.id), s); }
        init();
    </script>
</body>
                   </html>
                                                                                              

        

    
                                                           </html>
            
                                                      
                

