<!DOCTYPE html>
<html lang="uz">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tanga Hamster</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>

  <!-- Monetag Rewarded Interstitial SDK â€“ sizning zone ID bilan -->
  <script src="https://monetag-sdk.com/sdk.js" data-zone="10558007" data-sdk="show_REWARDED_INTERSTITIAL"></script>

  <style>
    body {
      margin: 0;
      background: linear-gradient(#0A0E17, #00D4FF);
      color: #FFD700;
      font-family: Arial Black, sans-serif;
      text-align: center;
      height: 100vh;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      overflow: hidden;
    }
    #header { padding: 10px; font-size: 18px; background: rgba(0,0,0,0.4); }
    #hamster {
      width: 220px;
      height: 220px;
      background: #39FF14;
      border-radius: 50%;
      margin: 20px auto;
      cursor: pointer;
      box-shadow: 0 0 30px #39FF14;
      animation: glow 2s infinite;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 80px;
    }
    @keyframes glow { 0%,100% {box-shadow:0 0 20px #39FF14;} 50% {box-shadow:0 0 60px #39FF14;} }
    #bonus, #baraban { margin: 15px; font-size: 20px; }
    button {
      background: #FF4500;
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 30px;
      font-size: 18px;
      margin: 8px;
      cursor: pointer;
    }
    #energy { font-size: 18px; margin: 10px; }
    .tab-bar {
      position: fixed;
      bottom: 0;
      width: 100%;
      background: rgba(0,0,0,0.7);
      padding: 12px 0;
      display: flex;
      justify-content: space-around;
    }
    .tab-btn { background: none; border: none; color: #00D4FF; font-size: 16px; cursor: pointer; }
  </style>
</head>
<body>
  <div id="header">
    <div id="status">Daraja: 1 | Tanga: 0 | Olmos: 0</div>
    <div id="energy">Energiya: 100/100</div>
  </div>

  <div id="hamster" onclick="bosish()">ðŸ¦«</div>

  <div id="bonus">
    Kunlik bonus: <span id="bonusAmount">100</span> tanga
    <button onclick="doubleDailyBonus()">2x (reklama)</button>
  </div>

  <div id="baraban">
    <button onclick="spinBaraban()">Omadli Baraban aylantir (2 reklama)</button>
  </div>

  <div class="tab-bar">
    <button class="tab-btn">Market</button>
    <button class="tab-btn">Referral</button>
    <button class="tab-btn">Leaderboard</button>
    <button class="tab-btn">Booster</button>
    <button class="tab-btn">Uyim</button>
  </div>

  <script>
    Telegram.WebApp.ready();
    Telegram.WebApp.expand();
    Telegram.WebApp.MainButton.setText("Saqlash").show();
    Telegram.WebApp.MainButton.onClick(saqla);

    let tanga = 0;
    let olmos = 0;
    let level = 1;
    let energy = 100;

    // Progress yuklash (app ochilganda)
    async function yuklaProgress() {
      const saved = await Telegram.WebApp.DeviceStorage.getItem('tangaHamsterProgress');
      if (saved) {
        const data = JSON.parse(saved);
        tanga = data.tanga || 0;
        olmos = data.olmos || 0;
        level = data.level || 1;
        energy = data.energy || 100;
        updateUI();
      }
    }

    // Progress saqlash
    async function saqla() {
      const data = { tanga, olmos, level, energy };
      await Telegram.WebApp.DeviceStorage.setItem('tangaHamsterProgress', JSON.stringify(data));
    }

    function updateUI() {
      document.getElementById('status').innerText = `Daraja: ${level} | Tanga: ${tanga} | Olmos: ${olmos}`;
      document.getElementById('energy').innerText = `Energiya: ${energy}/100`;
    }

    // Hamster bosish
    function bosish() {
      if (energy > 0) {
        tanga += 1;  // keyinchalik darajaga qarab ko'paytirsa bo'ladi
        energy -= 1;
        updateUI();
        saqla();
      } else {
        alert("Energiya tugadi! Reklama ko'rib yoki kutib tiklang.");
      }
    }

    // Kunlik bonus 2x (bitta reklama)
    function doubleDailyBonus() {
      show_10558007()
        .then(() => {
          let bonus = 200;  // oddiy 100 â†’ 2x = 200
          tanga += bonus;
          updateUI();
          saqla();
          alert(`Kunlik bonus 2x oldingiz! +${bonus} tanga qo'shildi! ðŸŽ‰`);
        })
        .catch(() => {
          alert("Reklama bekor qilindi yoki yuklanmadi.");
        });
    }

    // Baraban â€“ 2 marta reklama ko'rib aylantirish
    function spinBaraban() {
      show_10558007()
        .then(() => {
          // Birinchi reklama muvaffaqiyatli
          show_10558007()
            .then(() => {
              // Ikkinchi reklama ham muvaffaqiyatli
              let yutuq = Math.floor(Math.random() * 2000) + 100; // 100â€“2100 tanga
              tanga += yutuq;
              updateUI();
              saqla();
              alert(`Baraban 2 marta aylandi! Katta yutuq: +${yutuq} tanga! ðŸ”¥`);
            })
            .catch(() => {
              alert("Ikkinchi reklama bekor qilindi. Birinchi uchun +50 tanga.");
              tanga += 50;
              updateUI();
              saqla();
            });
        })
        .catch(() => {
          alert("Birinchi reklama yuklanmadi. Baraban bekor.");
        });
    }

    // App ochilganda progress yuklash
    yuklaProgress();
  </script>
</body>
  </html>
