<!DOCTYPE html>
<html lang="uz">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Oltin Tanga</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <script async src="https://monetag-sdk.com/sdk.js" data-zone="10558007" data-sdk="show_REWARDED_INTERSTITIAL"></script>
  <style>
    body {
      margin: 0;
      background: linear-gradient(135deg, #0a0a0a, #1a1a2e, #16213e);
      color: #ffd700;
      font-family: 'Arial Black', sans-serif;
      text-align: center;
      height: 100vh;
      overflow: hidden;
      position: relative;
    }
    #top-bar {
      display: flex;
      justify-content: space-between;
      padding: 10px 20px;
      background: rgba(0,0,0,0.8);
      font-size: 16px;
    }
    #center-tap {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 250px;
      height: 250px;
      background: radial-gradient(circle, #ffd700, #ffed4e);
      border-radius: 50%;
      cursor: pointer;
      box-shadow: 0 0 50px #ffd700;
      animation: pulse 2s infinite;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 120px;
    }
    @keyframes pulse { 0%, 100% { transform: translate(-50%, -50%) scale(1); } 50% { transform: translate(-50%, -50%) scale(1.05); } }
    #bonus-section { padding: 20px; }
    button {
      background: linear-gradient(45deg, #ff4500, #ff8c00);
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 25px;
      font-size: 16px;
      margin: 5px;
      cursor: pointer;
      box-shadow: 0 4px 15px rgba(255,69,0,0.5);
    }
    #bottom-bar {
      position: fixed;
      bottom: 0;
      width: 100%;
      background: rgba(0,0,0,0.9);
      display: flex;
      justify-content: space-around;
      padding: 15px 0;
    }
    .tab-btn {
      background: none;
      border: none;
      color: #ffd700;
      font-size: 14px;
      cursor: pointer;
    }
    .section { display: none; padding: 20px; }
    .section.active { display: block; }
    .item-card {
      background: rgba(255,255,255,0.1);
      border-radius: 15px;
      padding: 15px;
      margin: 10px;
      display: inline-block;
    }
  </style>
</head>
<body>
  <div id="top-bar">
    <div>Lvl 1</div>
    <div>PWR 1 | 500/s</div>
    <div id="energy">Energiya: 100/100</div>
  </div>

  <div id="center-tap" onclick="tap()">
    ðŸ¦«
  </div>

  <div id="bonus-section">
    <div id="status">Tanga: 0 | Olmos: 0</div>
    <button onclick="doubleBonus()">2x Bonus (Reklama)</button>
    <button onclick="spinWheel()">Omadli Baraban (2 Reklama)</button>
  </div>

  <div id="bottom-bar">
    <button class="tab-btn" onclick="showSection('market')">Bozor</button>
    <button class="tab-btn" onclick="showSection('boost')">Boost</button>
    <button class="tab-btn" onclick="showSection('home')">Uyim</button>
  </div>

  <!-- Market bo'limi -->
  <div id="market" class="section">
    <h2>Market (5 ta rangli tanga)</h2>
    <div class="item-card" style="border-left: 5px solid green;">
      Yashil Tanga | +10% tezlik | Narx: 10 olmos | <button onclick="buyItem('yashil')">Sotib olish</button>
    </div>
    <div class="item-card" style="border-left: 5px solid blue;">
      Ko'k Tanga | +20% energiya | Narx: 20 olmos | <button onclick="buyItem('ko'k')">Sotib olish</button>
    </div>
    <div class="item-card" style="border-left: 5px solid purple;">
      Binafsha Tanga | +30% daromad | Narx: 30 olmos | <button onclick="buyItem('binafsha')">Sotib olish</button>
    </div>
    <div class="item-card" style="border-left: 5px solid red;">
      Qizil Tanga | +50% PWR | Narx: 50 olmos | <button onclick="buyItem('qizil')">Sotib olish</button>
    </div>
    <div class="item-card" style="border-left: 5px solid gold;">
      Oltin Tanga | +100% hammasi | Narx: 100 olmos | <button onclick="buyItem('oltin')">Sotib olish</button>
    </div>
    <button onclick="exchange()">Tanga â†’ Olmos ayirboshlash (1 tanga = 0.001 olmos)</button>
  </div>

  <!-- Boost bo'limi -->
  <div id="boost" class="section">
    <h2>Boosterlar</h2>
    <div class="item-card" style="border-left: 5px solid orange;">
      Soatbay +50% | 1 soat | 20 olmos | <button onclick="buyBoost('soatbay')">Sotib olish</button>
    </div>
    <div class="item-card" style="border-left: 5px solid cyan;">
      Tanga bosish +2x | 30 daqiqa | 15 olmos | <button onclick="buyBoost('bosish')">Sotib olish</button>
    </div>
    <div class="item-card" style="border-left: 5px solid lime;">
      Energiya +100% | 1 soat | 25 olmos | <button onclick="buyBoost('energiya')">Sotib olish</button>
    </div>
  </div>

  <!-- Uyim bo'limi -->
  <div id="home" class="section">
    <h2>Mening Uyim</h2>
    <p>O'yin haqida: Tanga bosib olmos yig'ing, airdrop oling!</p>
    <p>Airdrop: TON wallet ga chiqarish (keyinroq ulanadi)</p>
    <p>Jami Tanga: <span id="total-tanga">0</span> | Olmos: <span id="total-olmos">0</span></p>
  </div>

  <script>
    Telegram.WebApp.ready();
    Telegram.WebApp.expand();
    Telegram.WebApp.MainButton.hide(); // Saqlash tugmasini yashirish

    let tanga = 0, olmos = 0, energy = 100, level = 1, totalTanga = 0, totalOlmos = 0;

    async function yukla() {
      const saved = await Telegram.WebApp.DeviceStorage.getItem('oltinTanga');
      if (saved) {
        const data = JSON.parse(saved);
        tanga = data.tanga || 0;
        olmos = data.olmos || 0;
        energy = data.energy || 100;
        totalTanga = data.totalTanga || 0;
        totalOlmos = data.totalOlmos || 0;
      }
      updateUI();
    }

    async function saqla() {
      const data = { tanga, olmos, energy, totalTanga, totalOlmos };
      await Telegram.WebApp.DeviceStorage.setItem('oltinTanga', JSON.stringify(data));
    }

    function updateUI() {
      document.getElementById('status').innerText = `Tanga: ${tanga} | Olmos: ${olmos}`;
      document.getElementById('energy').innerText = `Energiya: ${energy}/100`;
      document.getElementById('total-tanga').innerText = totalTanga;
      document.getElementById('total-olmos').innerText = totalOlmos;
    }

    function tap() {
      if (energy > 0) {
        tanga += 1;
        totalTanga += 1;
        energy -= 1;
        updateUI();
        saqla();
      } else {
        alert("Energiya tugadi! Booster oling yoki kutib turing.");
      }
    }

    function doubleBonus() {
      if (typeof show_10558007 === 'function') {
        show_10558007().then(() => {
          tanga += 200;
          totalTanga += 200;
          updateUI();
          saqla();
          alert("2x Bonus! +200 tanga ðŸŽ‰");
        }).catch(() => alert("Reklama bekor qilindi."));
      } else {
        alert("Reklama yuklanmadi.");
      }
    }

    function spinWheel() {
      if (typeof show_10558007 === 'function') {
        show_10558007().then(() => {
          show_10558007().then(() => {
            let yutuq = Math.floor(Math.random() * 2000) + 100;
            tanga += yutuq;
            totalTanga += yutuq;
            updateUI();
            saqla();
            alert("Baraban! + " + yutuq + " tanga ðŸ”¥");
          }).catch(() => alert("Ikkinchi reklama bekor."));
        }).catch(() => alert("Birinchi reklama bekor."));
      } else {
        alert("Reklama yuklanmadi.");
      }
    }

    function showSection(id) {
      document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
      document.getElementById(id).classList.add('active');
    }

    function buyItem(type) {
      if (olmos >= 10) {
        olmos -= 10;
        alert(type + " sotib olindi!");
        updateUI();
        saqla();
      } else {
        alert("Olmos yetarli emas!");
      }
    }

    function buyBoost(type) {
      if (olmos >= 15) {
        olmos -= 15;
        alert(type + " booster sotib olindi!");
        updateUI();
        saqla();
      } else {
        alert("Olmos yetarli emas!");
      }
    }

    function exchange() {
      let ayir = Math.floor(tanga * 0.001); // 1 tanga = 0.001 olmos
      if (ayir > 0) {
        olmos += ayir;
        tanga -= ayir * 1000;
        totalOlmos += ayir;
        updateUI();
        saqla();
        alert(ayir + " olmos oldingiz!");
      } else {
        alert("Ayirboshlash uchun 1000 tanga kerak!");
      }
    }

    yukla();
  </script>
</body>
  </html>
